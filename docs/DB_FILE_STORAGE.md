# –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ –ë–î –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –ú–æ–¥–µ–ª—å `InfoFile` (`models/models.py`)

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è:
- `file_data` (LargeBinary) - –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ –≤ –ë–î (BLOB)
- `stored_in_db` (Boolean) - —Ñ–ª–∞–≥: —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –≤ –ë–î (True) –∏–ª–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (False)
- `file_path` —Ç–µ–ø–µ—Ä—å nullable=True (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

### 2. FileManager (`file_manager.py`)

–ú–µ—Ç–æ–¥ `save_info_file()` —Ç–µ–ø–µ—Ä—å:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç **–≤—Å–µ —Ñ–∞–π–ª—ã** (–≤–∫–ª—é—á–∞—è –¥–æ–∫—É–º–µ–Ω—Ç—ã) –≤ –ë–î
- –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ –≤ –ø–∞–º—è—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–æ–ª–µ `file_data`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `stored_in_db=True`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—É—Ç—å –≤ `file_path` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

–ú–µ—Ç–æ–¥ `delete_file()` –æ–±–Ω–æ–≤–ª–µ–Ω:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ –ë–î (–≤–∫–ª—é—á–∞—è `file_data`)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### 3. –†–æ—É—Ç—ã —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

#### `/info/download_file/<section>/<filename>` (`info/routes.py`)
- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –≤ –ë–î
- –ï—Å–ª–∏ –¥–∞ - –æ—Ç–¥–∞–µ—Ç –∏–∑ –ë–î —á–µ—Ä–µ–∑ `BytesIO`
- –ï—Å–ª–∏ –Ω–µ—Ç - –∏—â–µ—Ç –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

#### `/food/<filename>` (`app.py`)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç –¥–ª—è —Ñ–∞–π–ª–æ–≤ –ø–∏—Ç–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–§–∞–π–ª—ã –Ω–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç –Ω–∞ Render.com** - –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î
2. **–ü—Ä–æ—â–µ –±—ç–∫–∞–ø—ã** - –≤—Å–µ –≤ –æ–¥–Ω–æ–π –ë–î
3. **–ù–µ –Ω—É–∂–Ω–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ** - –≤—Å–µ –≤ –ë–î
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–†–∞–∑–º–µ—Ä –ë–î —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è** - —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î
2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ë–î:**
   - SQLite: –¥–æ 2GB –Ω–∞ —Ñ–∞–π–ª (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤)
   - PostgreSQL: –¥–æ 1GB –Ω–∞ —Ñ–∞–π–ª (BYTEA) –∏–ª–∏ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ (Large Objects)
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–∞–±–æ—Ç–∞ —Å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ (>10MB)
   - –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

## üîß –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –æ–Ω–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î.

–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ë–î –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

–§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```python
# –í file_manager.py
file_info = file_manager.save_info_file(file, section_endpoint, field_name)
# –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
```

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

–§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–¥–∞—é—Ç—Å—è –∏–∑ –ë–î:

```python
# –í info/routes.py
info_file = InfoFile.query.filter_by(filename=filename).first()
if info_file.stored_in_db and info_file.file_data:
    # –û—Ç–¥–∞–µ–º –∏–∑ –ë–î
    file_stream = BytesIO(info_file.file_data)
    return send_file(file_stream, ...)
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

–§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ë–î:

```python
# –í file_manager.py
file_manager.delete_file(filename, section_name, field_name)
# –§–∞–π–ª —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ë–î (–≤–∫–ª—é—á–∞—è file_data)
```

## üîç –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è

–§–∞–π–ª—ã –ø–∏—Ç–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π URL `/food/<filename>`:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ `section_endpoint == 'food'` –∏–ª–∏ `field_name == 'menu_file'`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª** —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:**
   ```sql
   SELECT filename, file_size, stored_in_db FROM info_file WHERE filename = 'your_file.pdf';
   ```
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª
   - –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–∫–∞—á–∞—Ç—å—Å—è

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞. –í—Å–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (>10MB) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3, Cloudinary).

